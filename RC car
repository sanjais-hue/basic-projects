#include <WiFi.h>  // Library for Wi-Fi connectivity
#include <Arduino.h>  // Library for Arduino functions

 // Define Wi-Fi credentials
const char* ssid = "your_wifi_ssid";
const char* password = "your_wifi_password";

// Define pins for motor control
#define LEFT_MOTOR_PIN1 D1  // Left motor pin 1
#define LEFT_MOTOR_PIN2 D2  // Left motor pin 2
#define RIGHT_MOTOR_PIN1 D3  // Right motor pin 1
#define RIGHT_MOTOR_PIN2 D4  // Right motor pin 2

WiFiServer server(80);  // Create a Wi-Fi server on port 80

void setup() {
  // Initialize Wi-Fi
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.println("Connecting to Wi-Fi...");
  }
  Serial.println("Connected to Wi-Fi");

  // Initialize motor pins as outputs
  pinMode(LEFT_MOTOR_PIN1, OUTPUT);
  pinMode(LEFT_MOTOR_PIN2, OUTPUT);
  pinMode(RIGHT_MOTOR_PIN1, OUTPUT);
  pinMode(RIGHT_MOTOR_PIN2, OUTPUT);

  // Start the Wi-Fi server
  server.begin();
}

void loop() {
  // Check for incoming Wi-Fi requests
  WiFiClient client = server.available();
  if (client) {
    String request = client.readStringUntil('\r');
    client.flush();

    // Parse the request and control the motors accordingly
    if (request.indexOf("/forward") != -1) {
      // Move the car forward
      digitalWrite(LEFT_MOTOR_PIN1, HIGH);
      digitalWrite(LEFT_MOTOR_PIN2, LOW);
      digitalWrite(RIGHT_MOTOR_PIN1, HIGH);
      digitalWrite(RIGHT_MOTOR_PIN2, LOW);
    } else if (request.indexOf("/backward") != -1) {
      // Move the car backward
      digitalWrite(LEFT_MOTOR_PIN1, LOW);
      digitalWrite(LEFT_MOTOR_PIN2, HIGH);
      digitalWrite(RIGHT_MOTOR_PIN1, LOW);
      digitalWrite(RIGHT_MOTOR_PIN2, HIGH);
    } else if (request.indexOf("/left") != -1) {
      // Turn the car left
      digitalWrite(LEFT_MOTOR_PIN1, LOW);
      digitalWrite(LEFT_MOTOR_PIN2, HIGH);
      digitalWrite(RIGHT_MOTOR_PIN1, HIGH);
      digitalWrite(RIGHT_MOTOR_PIN2, LOW);
    } else if (request.indexOf("/right") != -1) {
      // Turn the car right
      digitalWrite(LEFT_MOTOR_PIN1, HIGH);
      digitalWrite(LEFT_MOTOR_PIN2, LOW);
      digitalWrite(RIGHT_MOTOR_PIN1, LOW);
      digitalWrite(RIGHT_MOTOR_PIN2, HIGH);
    } else if (request.indexOf("/stop") != -1) {
      // Stop the car
      digitalWrite(LEFT_MOTOR_PIN1, LOW);
      digitalWrite(LEFT_MOTOR_PIN2, LOW);
      digitalWrite(RIGHT_MOTOR_PIN1, LOW);
      digitalWrite(RIGHT_MOTOR_PIN2, LOW);
    }
  }
}
